<div class="project-container">
  <h2 class="list-title">Project Management</h2>
  <!-- Toggle Add/Edit Button -->
  <button class="btn btn-success" (click)="toggleAddForm()" id="btn">
    {{ editingProjectId ? ' Editing Project' : (showForm ? 'Cancel Adding' : 'Add Project') }}
  </button>

  <!-- Show form only if showForm is true -->
  <form *ngIf="showForm" [formGroup]="projectForm" (ngSubmit)="editingProjectId ? updateProject() : addProjects()" class="project-form">
    <h2 class="form-title">{{ editingProjectId ? ' Edit Project' : 'Add New Project' }}</h2>

    <div class="form-group">
      <label>Project Name</label>
      <input formControlName="name" class="form-input" />
    </div>

<div class="form-group" *ngIf="editingProjectId">
  <label>Status</label>
  <select formControlName="status" class="form-input">
    <option value="not started">Not Started</option>
    <option value="in progress">In Progress</option>
    <option value="completed">Completed</option>
    <option value="on hold">On Hold</option>
  </select>
</div>

    <div class="form-group">
      <label>Description</label>
      <textarea formControlName="description" class="form-textarea"></textarea>
    </div>

    <div class="button-group">
      <button type="submit" class="btn btn-primary">
        {{ editingProjectId ? 'Update Project' : 'Add Project' }}
      </button>
      <button type="button" *ngIf="editingProjectId" (click)="onCancelEdit()" class="btn btn-secondary">
        Cancel
      </button>
    </div>
  </form>


   <div class="filters" *ngIf="!showForm">
     <label>Status:
    <select [(ngModel)]="filter.status" (change)="applyFilters()">
      <option value="">All</option>
      <option *ngFor="let status of Statuses" [value]="status">{{ status }}</option>
    </select>
  </label>
  <button class="btn btn-primary" (click)="clearFilters()">Clear</button>
</div>
<table class="project-list">
  <thead>
    <tr>
      <th>Project Name</th>
      <th>Status</th>
      <th>Description</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let project of projects | paginate: { itemsPerPage: 5, currentPage: currentPage} ">
      <td>{{ project.name }}</td>
      <td>{{ project.status || 'not started' }}</td>
      <td>{{ project.description }}</td>
      <td class="item-buttons">
        <button (click)="onEdit(project)" class="btn btn-warning">Edit</button>
        <button (click)="onDelete(project.id)" class="btn btn-danger">Delete</button>
      </td>
    </tr>
  </tbody>
  </table>
  <ng-template #noProjects>
    <p class="alert alert-info">No projects found.</p>
  </ng-template>
  <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
</div>
