<div class="task-management">
  <h2>Task Management</h2>

  <button (click)="toggleForm()">Add Task</button>

  <form *ngIf="showForm" [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="task-form">
    <div>
      <label>Title</label>
      <input formControlName="title" type="text" required />
    </div>

    <div>
      <label>Description</label>
      <textarea formControlName="description"></textarea>
    </div>

    <div>
      <label>Status</label>
      <select formControlName="status">
        <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
      </select>
    </div>

    <div>
      <label>Project</label>
      <select formControlName="projectId">
        <option value="" disabled>Select Project</option>
        <option *ngFor="let project of projects" [value]="project.id">{{ project.name }}</option>
      </select>
    </div>

    <div>
      <label>Assigned to</label>
      <select formControlName="employeeId">
        <option value="" disabled>Select Employee</option>
        <option *ngFor="let emp of employees" [value]="emp.id">{{ emp.name }}</option>
      </select>
    </div>

    <div>
      <label>Due Date</label>
      <input formControlName="dueDate" type="date" required />
    </div>

    <button type="submit">{{ editingTask ? 'Update Task' : 'Add Task' }}</button>
    <button class="btn btn-primary" type="button" (click)="toggleForm()">Clear</button>
  </form>

  <h3>Task List</h3>
  <table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Status</th>
        <th>Project</th>
        <th>Employee</th>
        <th>Due-Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of tasks">
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>{{ getProjectName(task.projectId) }}</td>
        <td>{{ getEmployeeName(task.employeeId) }}</td>
        {{ task.dueDate }}
        <td>
          <button (click)="onEdit(task)">Edit</button>
          <button (click)="onDelete(task.id ?? 0)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
